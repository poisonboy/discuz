(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-comment-comment"],{"099a":function(e,t,n){function r(e){return e=e.toString(),e[1]?e:"0"+e}function i(e){return e.replace(/[\u0391-\uFFE5]/g,"aa").length}n("d81d"),n("d401"),n("d3b7"),n("25f0"),n("b64b"),n("ac1f"),n("5319"),n("e25e"),n("99af"),n("00b4"),n("baa5"),n("14d9");e.exports={formatTime:function(e){var t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),a=e.getHours(),o=e.getMinutes(),s=e.getSeconds();return[t,n,i].map(r).join("/")+" "+[a,o,s].map(r).join(":")},getDateDiff:function(e){var t,n,r,i,a,o=Date.parse(e.replace(/-/gi,"/"))/1e3,s=parseInt((new Date).getTime()/1e3),c=new Date(1e3*o),u=c.getFullYear(),l=c.getMonth()+1,d=c.getDate(),p=c.getHours(),f=c.getMinutes(),g=c.getSeconds();return l<10&&(l="0"+l),d<10&&(d="0"+d),p<10&&(p="0"+p),f<10&&(f="0"+f),g<10&&(g="0"+g),a=s-o,i=parseInt(a/86400),r=parseInt(a/3600),n=parseInt(a/60),t=parseInt(a),i>0&&i<3?i+"天前":i<=0&&r>0?r+"小时前":r<=0&&n>0?n+"分钟前":t<60?t<=0?"刚刚发表":t+"秒前":i>=3&&i<30?l+"月"+d+"日":i>=30?u+"年"+l+"月"+d+"日":void 0},cutstr:function(e,t,n){for(var r=0,i=new String,a=e.length,o=0;o<a;o++){var s=e.charAt(o);if(r++,escape(s).length>4&&r++,i=i.concat(s),r>=t)return 0==n&&(i=i.concat("...")),i}if(r<t)return e},removeHTML:function(e){var t=e.replace(/<\/?.+?>/g,"");return t=t.replace(/[\r\n]/g,""),t.replace(/ /g,"")},formatDateTime:function(e){return e.replace("T"," ")},compare:function(e){return function(t,n){var r=t[e],i=n[e];return r>i?-1:r<i?1:0}},checkImgType:function(e){return!!/\.(gif|jpg|jpeg|png|GIF|JPG|PNG)$/.test(e)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},CheckImgExists:function(e){var t=new Image;return t.src=e,t.fileSize>0||t.width>0&&t.height>0},GetUrlFileName:function(e,t){var n=e.substring(e.lastIndexOf("/")+1);return n=n==t||""==n?"index":n.substring(0,n.lastIndexOf(".")),n},json2Form:function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},getymd:function(e,t){e=e.replace("T"," ");var n=new Date(Date.parse(e.replace(/-/g,"/"))),r=n.getMonth()+1,i=n.getDate(),a=n.getFullYear();return"d"==t?i:"md"==t?r+"-"+i:"ymd"==t?a+"-"+r+"-"+i:void 0},getDateOut:function(e){var t=Date.parse(e.replace(/-/gi,"/"))/1e3,n=parseInt((new Date).getTime()/1e3),r=!1,i=n-t,a=parseInt(i/86400);return a>7&&(r=!0),r},drawTitleExcerpt:function(e,t,n){e.setFillStyle("#000000"),e.setTextAlign("left"),i(t)<=14?(e.setFontSize(40),e.fillText(t,40,460)):(e.setFontSize(30),e.fillText(t.substring(0,19),40,460),e.fillText(t.substring(19,36),40,510)),e.setFontSize(24),e.setTextAlign("left"),e.setGlobalAlpha(.7);for(var r=0;r<=50;r+=20)i(n)>50&&40==r?e.fillText(n.substring(r,r+20)+"...",40,570+2*r):e.fillText(n.substring(r,r+20),40,570+2*r);e.stroke(),e.save()},getStrLength:i,datefomate:function(e,t){var n=new Date(1e3*e),r=function(e){return(e<10?"0":"")+e};return t.replace(/yyyy|MM|dd|HH|mm|ss/g,(function(e){switch(e){case"yyyy":return r(n.getFullYear());case"MM":return r(n.getMonth()+1);case"mm":return r(n.getMinutes());case"dd":return r(n.getDate());case"HH":return r(n.getHours());case"ss":return r(n.getSeconds())}}))}}},"255a":function(e,t,n){(function(t){function r(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(r,i){n.success=function(e){uni.hideNavigationBarLoading(),r(e)},n.fail=function(e){i(e),uni.hideNavigationBarLoading(),t("log",e," at utils/wxRequest.js:25")},e(n)}))}}n("d3b7"),Promise.prototype.finally||(Promise.prototype.finally=function(e){var t=this.constructor;return uni.hideNavigationBarLoading(),this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))}),e.exports={postRequest:function(e,t){var n=r(uni.request);return n({url:e,method:"POST",data:t,header:{"content-type":"application/json"}})},getRequest:function(e,t){var n=r(uni.request);return n({url:e,method:"GET",data:t,header:{"Content-Type":"application/json"}})}}}).call(this,n("0de9")["log"])},4816:function(e,t,n){var r=n("a7bc");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var i=n("4f06").default;i("ea29dcda",r,!0,{sourceMap:!1,shadowMode:!1})},"4fc8":function(e,t,n){function r(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,r){t.success=function(e){n(e)},t.fail=function(e){r(e)},e(t)}))}}n("d3b7"),n("c975"),Promise.prototype.finally||(Promise.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))}),e.exports={wxPromisify:r,wxLogin:function(){return r(uni.login)},wxGetUserInfo:function(){return r(uni.getUserInfo)},wxGetSystemInfo:function(){return r(uni.getSystemInfo)}}},"517b":function(e,t,n){"use strict";var r=n("4816"),i=n.n(r);i.a},"5f2e":function(e,t,n){"use strict";var r=n("4ea4").default;n("ac1f"),n("841c");var i=r(n("c33c")),a=i.default.Domain,o=i.default.PageCount,s=(i.default.CategoriesID,"https://"+a+"/api/mobile/?version=5&module="),c="https://"+a+"/api/mobile/index.php?version=5&module=";e.exports={getPosts:function(e){var t=s+"thread_list&perpage="+o+"&orderby=date&order=desc&page="+e.page;return 0!=e.categories?t+="&filter[pids][0]="+e.categories:""!=e.search&&(t+="&filter[search]="+encodeURIComponent(e.search)),t},getcategoriesList:function(){var e=s+"forumindex";return e},getfollowList:function(e,t){var n=s+"follow.list?&filter[type]=2&perpage=10&page="+t+"&filter[userId]="+e;return n},gettopicsList:function(e,t){var n=s+"topics.list?filter[hot]=1&perpage="+t+"&page="+e;return n},getCategoryByID:function(e,t,n){return s+"forumdisplay&submodule=checkpost&fid="+e+"&perpage="+n+"&page="+t},getUser:function(e){return s+"user?userId="+e},postReply:function(e){return s+"posts.create"},gettopicByID:function(e,t,n){return s+"topics.list?filter[topicId]="+e+"&perpage="+n+"&page="+t},getthreadByID:function(e){return s+"viewthread&ordertype=2&tid="+e},getpostslist:function(e,t,n){return s+"viewthread&ordertype=2&tid="+e+"&perpage="+n+"&page="+t},getIndexlist:function(e,t){var n=c+"forumguide&view=newthread&page="+e;return n},getstickList:function(){var e=s+"forumguide&view=digest";return e},getsequencelist:function(){var e=c+"forumguide&view=sofa&perpage=10&top=3&page=1";return e},getessencelist:function(){var e=c+"forumguide&view=digest&perpage=10&page=1";return e},getnewreplylist:function(){var e=c+"forumguide&view=new&perpage=10&orderby=replies&page=1";return e},gethotlist:function(){var e=c+"forumguide&view=hot&perpage=10&orderby=views&page=1";return e},gethotuserList:function(){var e=s+"userrank";return e},getforumList:function(){var e=s+"forum";return e},getggList:function(e){var t=s+"thread_list&perpage=10&filter[pids][0]=6&page="+e;return t},getfileList:function(e){var t=s+"thread_list&perpage=10&filter[types][0]=108&page="+e;return t},getimageList:function(e){var t=s+"thread_list&perpage=10&filter[types][0]=101&page="+e;return t},getaudioList:function(e){var t=s+"thread_list&perpage=10&filter[types][0]=102&page="+e;return t},getvideoList:function(e){var t=s+"thread_list&perpage=10&filter[types][0]=103&page="+e;return t},getuserdetail:function(e){var t=s+"user?userId="+e;return t},getuserthread:function(e,t,n){var r=s+"thread_list&filter[toUserId]="+e+"&filter[complex]=5&perpage="+n+"&page="+t;return r},getpostsdetail:function(e){var t=s+"posts.detail?postId="+e;return t},getpostsreply:function(e,t,n){var r=s+"posts.reply?postId="+e+"&perpage="+n+"&page="+t;return r}}},"88fd":function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={data:function(){return{mescroll:null}},onPullDownRefresh:function(){this.mescroll&&this.mescroll.onPullDownRefresh()},onPageScroll:function(e){this.mescroll&&this.mescroll.onPageScroll(e)},onReachBottom:function(){this.mescroll&&this.mescroll.onReachBottom()},methods:{mescrollInit:function(e){this.mescroll=e},downCallback:function(){var e=this;this.mescroll.optUp.use?this.mescroll.resetUpScroll():setTimeout((function(){e.mescroll.endSuccess()}),500)},upCallback:function(){var e=this;setTimeout((function(){e.mescroll.endErr()}),500)}}},i=r;t.default=i},a7bc:function(e,t,n){var r=n("24fb");t=r(!1),t.push([e.i,".card[data-v-c39a5938]{margin:13px;padding:12px;background-color:#fff;border-radius:12px}.container[data-v-c39a5938]{padding:%?30?%;box-sizing:border-box}.cells[data-v-c39a5938]{border-radius:6px;height:%?280?%;background:#ededed;color:#333;box-sizing:border-box;padding:%?20?% %?20?% 0 %?20?%;position:relative}.textarea[data-v-c39a5938]{height:%?210?%;width:100%;color:#333;font-size:%?28?%}.phcolor-color[data-v-c39a5938]{color:#999}.textarea-counter[data-v-c39a5938]{font-size:%?24?%;color:#333;text-align:right;height:%?40?%;line-height:%?40?%;padding-top:%?4?%}.enclosure[data-v-c39a5938]{display:flex;align-items:center;padding:%?26?% %?10?%;box-sizing:border-box}.cmt-btn[data-v-c39a5938]{margin-top:%?60?%;text-align:right}",""]),e.exports=t},baa5:function(e,t,n){var r=n("23e7"),i=n("e58c");r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},c166:function(e,t,n){"use strict";(function(e){n("7a82");var r=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("5530"));n("d81d");var a=n("26cb"),o=n("5f2e"),s=(r(n("c33c")),r(n("88fd"))),c=(n("5f2e"),n("099a"),n("4fc8"),n("fccb"),n("255a"),{mixins:[s.default],data:function(){return{remnant:"0",content:"",id:"",replyId:"",isComment:!1,commentPostId:""}},onLoad:function(t){this.replyId=t.replyId,this.id=t.id,this.isComment=t.isComment,this.commentPostId=t.commentPostId,this.hasLogin?e("log","已登录"," at pages/comment/comment.vue:61"):e("log","未登录"," at pages/comment/comment.vue:59")},onShow:function(){},methods:{descInput:function(e){this.remnant=e.detail.cursor},doReplyAction:function(){var t=this,n={content:this.content,id:this.id,isComment:this.isComment,commentPostId:this.commentPostId,replyId:this.replyId};(0,o.doReply)(n).then((function(n){if(0===n.data.Code){t.content="",uni.showToast({icon:"success",title:"回复成功",duration:2e3});var r=getCurrentPages(),i=r[r.length-2];e("log","beforePage",i," at pages/comment/comment.vue:99"),e("log",r," at pages/comment/comment.vue:100"),uni.navigateBack({success:function(){i.$vm.refresh()}})}else uni.showToast({icon:"error",title:n.data.Message,duration:2e3})}))},previewImage:function(e){var t=this.threadimgs.map((function(e){return e.thumbUrl}));uni.previewImage({current:e,urls:t,loop:!0})},initNavigation:function(e){this.opacity=e.opacity,this.top=e.top},opacityChange:function(e){this.opacity=e.opacity},back:function(){uni.navigateBack()}},onPageScroll:function(e){this.scrollTop=e.scrollTop},computed:(0,i.default)({},(0,a.mapState)(["hasLogin","userInfo"]))});t.default=c}).call(this,n("0de9")["log"])},c33c:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={_home_data:{banner:function(){return[{image:"/static/1.png",path:"/pages/thread/thread?id=50494"},{image:"/static/2.png",path:"/pages/thread/thread?id=54569"},{image:"/static/3.png",path:"/pages/thread/thread?id=48991"}]},nav1:function(){return[{id:1,name:"图库",bgcolor:"orange",path:"/pages/media/image",img:"/static/photo.png"},{id:2,name:"视频",color:"orange",path:"/pages/media/video",img:"/static/video.png"},{id:3,name:"音频",color:"",path:"/pages/media/audio",img:"/static/music.png"},{id:4,name:"文件",color:"",path:"/pages/media/file",img:"/static/files.png"}]},nav2:function(){return[{id:1,name:"直播LIVE",color:"",path:"plugin-private://wx2b03c6e691cd7370/pages/live-player-plugin?room_id=2",img:"/static/music.png"},{id:2,name:"在线商城",color:"",path:"plugin-private://wx34345ae5855f892d/pages/productDetail/productDetail?productId=1145653",img:"/static/files.png"}]}},Domain:"dzpyq.xcxgy.cn",WebsiteName:"站长圈",Wechat:"微信：poisonkid ",PageCount:"10",Chaad:"adunit-bb0c7ed29c490a71",Notice:"/pages/thread/thread?id=48991",About:"/pages/user/user?id=27652",Update:"/pages/list/list?id=6&name=官方动态",WebType:"0"};t.default=r},d23f:function(e,t,n){"use strict";n.r(t);var r=n("f0b5"),i=n("d3c6");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("517b");var o=n("f0c5"),s=Object(o["a"])(i["default"],r["b"],r["c"],!1,null,"c39a5938",null,!1,r["a"],void 0);t["default"]=s.exports},d3c6:function(e,t,n){"use strict";n.r(t);var r=n("c166"),i=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=i.a},f0b5:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.hasLogin?n("v-uni-view",{staticClass:"card"},[n("v-uni-view",{staticClass:"cells"},[n("v-uni-textarea",{staticClass:"textarea",attrs:{name:"desc",placeholder:"发表你的评论...",maxlength:"500","placeholder-class":"phcolor-color","auto-focus":!0},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.descInput(t)}},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),n("v-uni-view",{staticClass:"textarea-counter"},[e._v(e._s(e.remnant)+"/500")])],1),n("v-uni-view",{staticClass:"cmt-btn"},[n("v-uni-button",{staticClass:"circle btn bg-base",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.doReplyAction.apply(void 0,arguments)}}},[e._v("发表")])],1)],1):e._e()},i=[]},fccb:function(e,t,n){n("255a"),n("5f2e");e.exports={}}}]);